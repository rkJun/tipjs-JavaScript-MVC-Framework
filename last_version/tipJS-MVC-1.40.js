/*
 * tipJS - OpenSource Javascript MVC Framework ver.1.40
 *
 * Copyright 2012.07 SeungHyun PAEK
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * HomePage: http://www.tipjs.com
 * Contact: http://www.tipjs.com/contact
 */
(function(ao){var w={};w.ver=w.version=w.VERSION="1.40";ao.tipJS=w;var an=Object.prototype.toString;var d=["Arguments","Function","String","Number","Boolean","Date","RegExp"];for(var ae=0,K=d.length;ae<K;ae=ae+1){(function(i){w["is"+i]=function(t){return an.call(t)==="[object "+i+"]"}})(d[ae])}w.isArray=Array.isArray||function(i){return an.call(i)==="[object Array]"};w.isObject=function(i){return i===Object(i)};var ad=function(t,i){return !i?document.getElementById(t):i.getElementById(t)};var z=function(i,t){return !t?document.getElementsByName(i):t.getElementsByName(i)};var L=function(i,t){return !t?document.getElementsByTagName(i):t.getElementsByTagName(i)};var x=function(av){var au=[];if(av.length){for(var at=0,t=av.length;at<t;at++){au[at]=av[at]}}return au};var y=function(i){return"Please check your "+i+" definition"};var ag=function(t,at){for(var i in at){if(t[i]){continue}t[i]=at[i]}return t};var o=function(au,t){if(w.isArray(au)){for(var at=au.length;at--;){if(au[at]==t){return true}}}else{if(au==t){return true}}return false};var P=function(av,at){if(!w.isObject(at)){throw new Error(y(av))}var t=(at.__name)?at.__name:at.name;if(!w.isString(t)){throw new Error(y(av))}if(at.__extend&&av!="controllers"&&o(at.__extend,t)){throw new Error("Can't extend itself:"+t)}var au=t.split("."),aw=au[0],i=au[1],ay=aa[aw];if(!ay){throw new Error(y(av))}if(ay.loadOrder.presentOrder()===av){var ax=V[aw]=V[aw]||{};ax[av]=ax[av]||{};ax[av][i]=at}};var v=function(ax,at){var t=p.loadOrder;if(at===t.order[0]){return h(ax[at])}var aw=ax.name;if(aa.MAIN&&aa.MAIN!=aw&&at!="models"){return[]}if(at===t.order[1]&&ax.localSet){ax[at]=[Q+r.path.lang+"/"+w.lang+".js"];return ax[at]}var av=r.path[at],au=r.applicationPath[aw],i=h(ax[at]);return D(au,av,i)};var D=function(au,aw,av){var at=[];for(var t=av.length;t--;){at.push(au+ah(aw)+av[t])}return at};var M=function(t,i){if(i.nocache===true){t+=(t.indexOf("?")<0)?"?":"&";t+=i.paramName+"="+i.version}return t};var m=w.loadJS=function(au,at,t){var i=document.createElement("script");i.type="text/javascript";i.src=M(au,at);i.charset=r.charSet;if(t){if(i.readyState){i.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete"){this.onreadystatechange=null;t(this)}}}else{i.onload=function(){t(this)}}}L("head")[0].appendChild(i)};var am=function(i,at,t){m(t,J(i),function(au){if(U(i,at,au.src)){Z(i)}})};var ap=function(t,au){G(t,au);var av=ab[t][au].requireList=v(q(t),au);if(av.length>0){for(var at=av.length;at--;){am(t,au,av[at])}}else{Z(t)}};var f=function(av,au){var t=av.__extend;if(!t){return av}if(w.isString(t)){av=E(av,t,au)}else{if(t instanceof Array){for(var at=t.length;at--;){av=E(av,t[at],au)}}}return av};var E=function(au,at,t){var i=at.split(".");if(t=="model"){if(i.length==2){return ag(au,R(O(i[1],false,i[0])))}else{return ag(au,R(n(at)))}}else{if(i.length==2){return ag(au,R(N(i[1],i[0])))}else{return ag(au,R(c(at)))}}};var n=w.loadCommonModel=function(t,aw){var au=aj;if(!au[t]||au[t]===undefined){throw new Error("Could not find commonModel: "+t)}if(aw===true){var at=F;if(at[t]){return at[t]}var i=at[t]=R(au[t],T["CommonModel"+t]);if(typeof i.__init=="function"){i.__init()}return i}var av=R(au[t],T["CommonModel"+t]);if(w.isFunction(av.__init)){av.__init()}return av};var O=function(at,ay,t){var ax=(!t)?aa.MAIN:t,av=V[ax].models;if(!av[at]||av[at]===undefined){throw new Error("Could not find model: "+at)}if(ay===true){var au=V[ax].syncModels;if(!au){au=V[ax].syncModels={}}if(au[at]){return au[at]}var i=au[at]=R(av[at],T["models"+ax+"."+at]);if(w.isFunction(i.__init)){i.__init()}return i}var aw=R(av[at],T["models"+ax+"."+at]);if(w.isFunction(aw.__init)){aw.__init()}return aw};var c=function(at){var t=a;if(!t||!t[at]||t[at]===undefined){throw new Error("Could not find commonView: "+at)}var i=R(t[at],T["CommonView"+at]);if(w.isFunction(i.__init)){i.__init()}return i};var N=function(av,i){var au=(!i)?aa.MAIN:i,at=V[au].views;if(!at||!at[av]||at[av]===undefined){throw new Error("Could not find view: "+av)}var t=R(at[av],T["views"+au+"."+av]);if(w.isFunction(t.__init)){t.__init()}return t};w.loadModel=function(t,av){var at,au,i,aw=(w.isBoolean(av))?av:false;if((at=t.split(".")).length!=2){throw new Error("tipJS.loadModel : invalid parameter")}au=at[0];i=at[1];return O(i,aw,au)};var q=function(i){return aa[i].define};var J=function(i){var at={};var t=q(i);if(t){at.nocache=t.noCache;at.version=(t.noCacheAuto===true)?""+Math.random():t.noCacheVersion;at.paramName=t.noCacheParam}return at};var b=function(){var au,aw,i,t,at,av;for(au in aa){Y[au]={};aw=aa[au];i=aw.controller;for(t in i){at=R(i[t]);av={controllerName:(at.__name)?at.__name:at.name,beforeCtrler:aw.define.beforeController,afterCtrler:aw.define.afterController,loadCommonModel:at.loadCommonModel,loadCommonView:at.loadCommonView,loadModel:at.loadModel,loadView:at.loadView,renderTemplate:at.renderTemplate,getById:at.getById,getByName:at.getByName,getByTag:at.getByTag};Y[au][t]=(function(ay,ax){return function(){var aA=arguments,aB,az;if(w.isDevelopment===true){aB=C()}if(ay.beforeCtrler&&ay.beforeCtrler.apply(ay,arguments)===false){return}az=function(){var aD=function(){var aG=function(){if(ax.afterInvoke){ax.afterInvoke.apply(ax,aA)}};var aE=function(){if(ax.invoke&&ax.invoke.apply(ax,aA)===false){return}aG()};var aF=function(){if(ax.beforeInvoke&&ax.beforeInvoke.apply(ax,aA)===false){return}aE()};aF()};if(ax.exceptionInvoke){try{aD()}catch(aC){(aA=x(aA)).unshift(aC);ax.exceptionInvoke.apply(ax,aA)}}else{aD()}if(ay.afterCtrler){ay.afterCtrler.apply(ay,aA)}if(w.isDevelopment===true){w.debug(ay.controllerName+" completed in "+((C()-aB)/1000)+" seconds")}};if(ax.async===true){setTimeout(az,(!ax.delay?15:ax.delay))}else{az()}}})(av,at)}}};var Z=function(aA){var at,aC;var aw=aa[aA];if(aw.loadOrder.isLastOrder()===false){ap(aA,aw.loadOrder.nextOrder());return}if(aa.MAIN!=aA){return}var av=aw.controller=V[aA].controllers;if(av){for(at in av){av[at].loadCommonModel=n;av[at].loadCommonView=c;av[at].loadModel=O;av[at].loadView=N;av[at].renderTemplate=A;av[at].getById=ad;av[at].getByName=z;av[at].getByTag=L}}b();for(at in aj){aC=(aj[at].__name)?aj[at].__name:aj[at].name;f(aj[at],"model");if(aC.lastIndexOf("VO")!=(aC.length-2)){aj[at].loadCommonModel=n;aj[at].getById=ad;aj[at].getByName=z;aj[at].getByTag=L}T["CommonModel"+aC]=!ac(aj[at])}var ax=V[aA].models;if(ax){for(at in ax){aC=(ax[at].__name)?ax[at].__name:ax[at].name;f(ax[at],"model");if(aC.lastIndexOf("VO")!=(aC.length-2)){ax[at].loadCommonModel=n;ax[at].loadModel=O;ax[at].getById=ad;ax[at].getByName=z;ax[at].getByTag=L}T["models"+aC]=!ac(ax[at])}}for(at in a){aC=(a[at].__name)?a[at].__name:a[at].name;f(a[at],"view");a[at].loadCommonView=c;a[at].renderTemplate=A;a[at].getById=ad;a[at].getByName=z;a[at].getByTag=L;T["CommonView"+aC]=!ac(a[at])}var t=V[aA].views;if(t){for(at in t){aC=(t[at].__name)?t[at].__name:t[at].name;f(t[at],"view");t[at].loadCommonView=c;t[at].loadView=N;t[at].renderTemplate=A;t[at].getById=ad;t[at].getByName=z;t[at].getByTag=L;T["views"+aC]=!ac(t[at])}}w.debug("tipJS version "+w.version+"["+w.lang+"]");if(!w.isArray(aw.onLoadArgs)){aw.onLoadArgs=[]}aw.define.onLoad.apply(aw.define,aw.onLoadArgs);if(H&&H[aA]){var az=H[aA];for(var au=0,aB=az.length;au<aB;au++){var ay=az[au];w.action(ay.name,ay.param)}delete H[aA]}};var U=function(t,av,ax){var au,aw=ab[t][av].requireList,at;for(au=aw.length;au--;){if(aw[au]===true){continue}at=aw[au].indexOf("./")>-1?aw[au].substr(aw[au].lastIndexOf("./")+1):aw[au];if(ax.indexOf(at)>-1){aw[au]=true;break}}for(au=aw.length;au--;){if(aw[au]!==true){return false}}return true};var ah=function(i){return"/"+i+"/"};var al=function(i){if(w.isFunction(Object.create)){al=function(t){return Object.create(t)}}else{al=function(at){function t(){}t.prototype=at;return new t()}}return al(i)};var R=w.cloneObject=function(au,i){if(au==null||typeof au!="object"){return au}if(!i){var at=(au instanceof Array)?[]:{};for(var t in au){if(typeof au[t]=="object"){at[t]=R(au[t],false)}else{at[t]=au[t]}}return at}else{return al(au)}};var ac=function(t){for(var i in t){if(typeof t[i]=="object"){return true}}return false};var ak=w.echo=function(au,t,at){if(at&&(typeof at!="string"||typeof at=="string"&&(at.split(".").length+at.split("]").length)>3)){return}if(!t){t=""}if(au===null||au===undefined){console.log(((at)?at+".":"")+au);return}if(typeof au!="object"){if(typeof au==t||t===""){console.log(((at)?at+".":"")+au+"["+typeof au+"]")}return}if(au instanceof Array){console.log(((at)?at+":":"")+"[Array["+au.length+"]]")}else{console.log(((at)?at+":":"")+"[Object]")}for(var i in au){if(au instanceof Array){if(typeof au[i]=="object"){ak(au[i],t,((at)?at+"[":"[")+i+((at)?"]":"]"))}else{if(typeof au[i]==t||t===""){console.log(((at)?at+"[":"[")+i+((at)?"]":"]")+":"+au[i]+" ("+typeof au[i]+")")}}}else{if(typeof au[i]=="object"){ak(au[i],t,((at)?at+".":"")+i)}else{if(typeof au[i]==t||t===""){console.log(((at)?at+".":"")+i+":"+au[i]+" ("+typeof au[i]+")")}}}}};var h=w.uniqueArray=function(at){var av=[],t=at.length;for(var aw=0;aw<t;aw++){for(var au=aw+1;au<t;au++){if(at[aw]===at[au]){au=++aw}}av.push(at[aw])}return av};var G=function(i,t){var at=ab[i]=ab[i]||{};at[t]=at[t]||{}};var W=function(au,at){for(var av=0,t=at.length;av<t;av++){var aw=at[av];if(au.noCache&&au.noCache===true){aw+=(aw.indexOf("?")<0)?"?":"&";aw+=(au.noCacheParam?au.noCacheParam:r.noCacheParam)+"=";if(au.noCacheAuto===true){aw+=Math.random()}else{aw+=(au.noCacheVersion?au.noCacheVersion:r.noCacheVersion)}}document.write('<script type="text/javascript" charset="'+(au.charSet?au.charSet:r.charSet)+'" src="'+aw+'"><\/script>')}};w.config=function(t){if(t.commonLib){W(t,t.commonLib)}if(t.commonModel){W(t,t.commonModel)}if(t.commonView){W(t,t.commonView)}r=ag(t,p.config);if(w.isDevelopment===null){for(var at=r.developmentHostList.length;at--;){if(aq.hostname.match(r.developmentHostList[at])!==null){w.isDevelopment=true;break}}}};var C=function(){var i=new Date();return(i.now)?i.now():i.getTime()};w.benchmark={};w.benchmark.mark=function(i){B[i]=C()};w.benchmark.elapsedTime=function(i,au,t){var at=B[i],aw=B[au],av=(aw-at)/1000;if(t){t(i,au,at,aw,av)}else{w.log("elapsed time["+i+" to "+au+"] : "+av+" seconds","[BENCHMARK]")}return av};var l=function(){var i=false;if(window.XMLHttpRequest){i=new XMLHttpRequest()}else{if(window.ActiveXObject){try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(at){try{i=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}}}l=function(){return i};return l()};var A=function(au){var at;var aw=aa.MAIN;if(arguments.length>1){return u(arguments[0],arguments[1],arguments[2])}if(q(aw).templateCache&&s[au.url]){at=u(s[au.url],au.data,au.tplId);if(w.isString(au.renderTo)){ad(au.renderTo).innerHTML+=at}return at}var t=J(aw),ax=M(au.url,t),i=l();i.open("GET",ax,false);try{i.send(null)}catch(av){return null}if(i.readyState==4&&i.status==200){at=s[au.url]=i.responseText;at=u(at,au.data,au.tplId);if(w.isString(au.renderTo)){ad(au.renderTo).innerHTML+=at}return at}else{throw new Error("Could not find templates file:"+ax)}};var u=function(ax,av,aA){ax=ax.replace(/\r\n/g,"\n");ax=ax.replace(/\r/g,"\n");ax=ax.replace(/\\/g,"\\\\");ax=ax.replace(/\n/g,"");if(w.isString(aA)){var az=ax.split("[[#"),at=new RegExp("^"+aA+"]]");for(var aw=0,ay=az.length;aw<ay;aw++){if(az[aw].match(at)){ax=az[aw].replace(at,"");break}}}else{ax=ax.replace(/\[\[#[a-zA-Z0-9_-]*\]\]/g,"")}var au=ax.split("@>"),t=new Function("data",ar(au));return t(av)};var ar=function(aA){var aD=[],aB=[],t=[],ay="PLN",aC="VAL",au="PAS",aw="__tempArr__.push(",av,az,ax,at;aD.push("var __tempArr__ = [];");for(av=0,az=aA.length;av<az;av++){ax=aA[av];if(ax.indexOf("<@=")>-1){at=ax.split("<@=");if(at.length>1){t.push(at[0].replace(/"/g,'\\"'));t.push(at[1]);aB.push(ay);aB.push(aC)}else{t.push(at[0]);aB.push(aC)}}else{if(ax.indexOf("<@")>-1){at=ax.split("<@");if(at.length>1){t.push(at[0].replace(/"/g,'\\"'));t.push(at[1]);aB.push(ay);aB.push(au)}else{t.push(at[0]);aB.push(au)}}else{t.push(ax.replace(/"/g,'\\"'));aB.push(ay)}}}for(av=0,az=t.length;av<az;av++){ax=t[av];if(aB[av]==aC){ax='""+'+ax+'+""';aD.push(aw+ax+");")}else{if(aB[av]==au){aD.push(ax)}else{ax='"'+ax+'"';aD.push(aw+ax+");")}}}aD.push("return __tempArr__.join('');");return aD.join("")};w.commonModel=function(t){var i="CommonModel";if(!t||typeof t!="object"){throw new Error(y(i))}var at=(t.__name)?t.__name:t.name;if(typeof at!="string"){throw new Error(y(i))}if(t.__extend&&o(t.__extend,at)){throw new Error("Can't extend itself:"+at)}aj[at]=t};w.commonView=function(t){var i="CommonView";if(!t||typeof t!="object"){throw new Error(y(i))}var at=(t.__name)?t.__name:t.name;if(typeof at!="string"){throw new Error(y(i))}if(t.__extend&&o(t.__extend,at)){throw new Error("Can't extend itself:"+at)}a[at]=t};w.log=function(at,au){window.console=window.console||{log:function(){},error:function(){}};var ay=new Date(),i=ay.getFullYear(),aA=ay.getMonth()+1,av=ay.getDate(),az=ay.getHours(),t=ay.getMinutes(),aw=ay.getSeconds(),ax=ay.getMilliseconds();console.log(((au)?au:"")+i+"/"+aA+"/"+av+" "+az+":"+t+":"+aw+"."+ax+" "+at)};w.debug=function(i){if(w.isDevelopment){w.log(i,"[DEBUG]")}};w.localSet=function(i){var t=aa[aa.MAIN];if(t.loadOrder.presentOrder()===p.loadOrder.order[1]){X=i}};w.msg=function(i){return X[i]?X[i]:i};w.controller=function(i){P("controllers",i)};w.model=function(i){P("models",i)};w.view=function(i){P("views",i)};w.action=function(){var au,av,ax,aw,t;if(!arguments.length){return Y}else{var at=arguments[0];var i=x(arguments).slice(1);au=at.split(".");if((av=au[0]).length==0||(ax=au[1]).length==0){throw new Error("tipJS.action : invalid parameter")}aw=aa[av];if(!aw||!aw.loadOrder||!aw.loadOrder.isLastOrder()){H[av]=H[av]||[];H[av].push({name:at,param:i});return}t=Y[av][ax];t.apply(t,i)}};w.loadApp=function(){var ax=arguments[0],t=x(arguments).slice(1);if(typeof ax=="string"){ax=[ax]}for(var at=0,av=ax.length;at<av;at++){var aw=ax[at];if(!aa.MAIN){aa.MAIN=aw}if(t.length){aa[aw]={};aa[aw].onLoadArgs=t}var au=r.applicationPath[aw]+"/"+r.defineFileName+".js";setTimeout(function(){if(!aa[aw]||!aa[aw].define){throw new Error("Could not find application:"+aw)}},1000);m(au,{nocache:true,version:Math.random(),paramName:r.noCacheParam})}delete w.loadApp};w.define=function(at){ag(at,p.define);if(at.templateCache===undefined){at.templateCache=r.templateCache}if(at.noCache===undefined){at.noCache=r.noCache;at.noCacheVersion=r.noCacheVersion;at.noCacheParam=r.noCacheParam;at.noCacheAuto=r.noCacheAuto}else{if(at.noCache===true){if(at.noCacheVersion===undefined){at.noCacheVersion=r.noCacheVersion}if(at.noCacheParam===undefined){at.noCacheParam=r.noCacheParam}if(at.noCacheAuto===undefined){at.noCacheAuto=r.noCacheAuto}}}var i=at.name;aa[i]=aa[i]||{};aa[i].loadOrder={};ag(aa[i].loadOrder,p.loadOrder);var t=aa[i].loadOrder.presentOrder();G(i,t);aa[i].define=at;ap(i,t)};var ab={},V={},aj={},F={},a={},p={config:{noCache:false,noCacheVersion:1,noCacheParam:"noCacheVersion",noCacheAuto:false,templateCache:true,charSet:"utf-8",defineFileName:"define",path:{lang:"lang",controllers:"controllers",models:"models",views:"views"},developmentHostList:[],applicationPath:{}},define:{extLib:[],lang:[],controllers:[],models:[],views:[],localSet:false,onLoad:function(){},beforeController:function(){},afterController:function(){},loadCommonModel:n,loadModel:O,loadCommonView:c,loadView:N},loadOrder:{index:0,init:function(){this.index=0},presentOrder:function(){return this.order[this.index]},nextOrder:function(){return this.order[++this.index]},isLastOrder:function(){return(this.index+1)==this.order.length},order:["extLib","lang","controllers","models","views"]}},B={},aa={},Y={},X={},s={},H={},r=R(p.config),T={},aq=window.location,j=aq.pathname,af=aq.search,S=L("script"),Q,e,k,I=null,g=(navigator.language||navigator.systemLanguage||navigator.userLanguage).substr(0,2);for(var ai=S.length;ai--;){e=S[ai].src;k=e.match(/tipJS-MVC-1\.40\.js$/);if(k){Q=e.substring(0,e.length-k[0].length);break}}if(af.match("(\\?|&)debug")!==null||j.match("debug")!==null){I=true}w.isDevelopment=I;w.lang=g;document.write('<script type="text/javascript" charset="UTF-8" src="'+Q+"tipJS.config.js?"+r.noCacheParam+"="+Math.random()+'"><\/script>')})(this);